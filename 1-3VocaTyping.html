<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>단어입력 (Spelling Practice)</title>
<style>
  :root{
    --sky:#38bdf8;
    --sky-dark:#0ea5e9;
    --bg:#f0fbff;
    --ink:#0f172a;
    --muted:#64748b;
    --ok:#10b981;
    --err:#ef4444;
  }
  *{box-sizing:border-box}
  body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; background:linear-gradient(180deg,#eaf9ff 0%, #ffffff 60%); color:var(--ink); min-height:100vh; display:flex; align-items:center; justify-content:center;}
  .app{width:min(900px,92vw); background:#fff; border-radius:16px; box-shadow:0 20px 40px rgba(2,6,23,.1); padding:20px 18px 22px; text-align:center}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px}
  .title{font-weight:800; font-size:clamp(18px,2.8vw,24px); color:#075985}
  .progress{font-weight:700;color:var(--muted)}
  .bar{height:10px; background:#e2f4ff; border-radius:999px; overflow:hidden; margin:8px 0 18px}
  .bar > div{height:100%; width:0%; background:linear-gradient(90deg,var(--sky),var(--sky-dark)); transition:width .35s ease}

  .card{background:linear-gradient(180deg,#f6fcff,#ffffff); border:1px solid #e8f6ff; border-radius:16px; padding:22px 18px; display:grid; gap:14px; justify-items:center}
  .ko{font-size:clamp(18px,3.5vw,24px); font-weight:800; color:#0c4a6e; text-align:center}
  .hint{font-size:13px; color:var(--muted); text-align:center}
  .field{display:flex; justify-content:center; margin-top:6px}
  input[type="text"]{
    width:320px; /* 입력칸 길이 버튼 네 개와 비슷하게 */
    padding:12px 12px; font-size:clamp(16px,3vw,18px); border:2px solid #cfefff; border-radius:12px; outline:none; background:#f7fdff;
    text-align:center;
  }
  input[type="text"]:focus{border-color:var(--sky-dark); box-shadow:0 0 0 3px rgba(14,165,233,.15)}
  .btn{appearance:none; border:none; border-radius:12px; padding:10px 14px; font-weight:800; cursor:pointer; font-size:14px; min-width:72px}
  .primary{background:var(--sky-dark); color:#fff}
  .ghost{background:#eef9ff; color:#0369a1; border:1px solid #cfefff}
  .danger{background:#fee2e2; color:#b91c1c; border:1px solid #fecaca}
  .row{display:flex; gap:8px; flex-wrap:wrap; justify-content:center; margin-top:10px}
  .msg{min-height:26px; font-weight:700; text-align:center}
  .msg.ok{color:var(--ok)}
  .msg.err{color:var(--err)}
  .answer{display:none; font-size:14px; color:#111827; background:#fff7ed; border:1px dashed #fdba74; padding:10px 12px; border-radius:10px; text-align:center}
  .controls{display:flex; justify-content:center; flex-wrap:wrap; gap:8px; margin-top:6px}
  .muted{color:var(--muted); font-size:13px}
</style>
</head>
<body>
  <div class="app">
    <header>
      <div class="title">단어입력 · Spelling Practice</div>
      <div class="progress" id="progress">1 / 10</div>
    </header>
    <div class="bar"><div id="bar"></div></div>

    <section class="card">
      <div class="ko" id="ko">뜻이 여기 표시됩니다</div>
      <div class="hint">영어 철자를 정확히 입력하세요. (자동완성/붙여넣기 금지)</div>

      <div class="field">
        <input id="input" type="text" inputmode="latin" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" placeholder="영어 철자 입력" />
      </div>
      <div class="row">
        <button class="btn primary" id="check">정답 확인</button>
        <button class="btn ghost" id="clear">지우기</button>
        <button class="btn danger" id="show" disabled>정답 보기</button>
        <button class="btn ghost" id="restart">다시풀기</button>
      </div>

      <div class="msg" id="msg"></div>
      <div class="answer" id="answer"></div>

      <div class="controls">
        <div class="muted" id="tries">시도: 0/3</div>
      </div>
    </section>
  </div>

<script>
const DATA = [
  { word: 'play', meaning: '놀다, 경기하다' },
  { word: 'soccer', meaning: '축구' },
  { word: 'do', meaning: '하다' },
  { word: 'homework', meaning: '숙제' },
  { word: 'finish', meaning: '끝내다' },
  { word: 'after school', meaning: '방과 후' },
  { word: 'join', meaning: '참가하다, 가입하다' },
  { word: 'tomorrow', meaning: '내일' },
  { word: 'today', meaning: '오늘' },
  { word: 'yesterday', meaning: '어제' }
];

let order = [];
let idx = 0;
let tries = 0;
let revealed = false;

const $ko = document.getElementById('ko');
const $progress = document.getElementById('progress');
const $bar = document.getElementById('bar');
const $input = document.getElementById('input');
const $check = document.getElementById('check');
const $msg = document.getElementById('msg');
const $answer = document.getElementById('answer');
const $tries = document.getElementById('tries');
const $clear = document.getElementById('clear');
const $show = document.getElementById('show');
const $restart = document.getElementById('restart');

function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a; }
function normalize(s){ return s.replace(/\s+/g,' ').trim().toLowerCase(); }

$input.addEventListener('paste', e=> e.preventDefault());
$input.addEventListener('drop', e=> e.preventDefault());
$input.addEventListener('dragover', e=> e.preventDefault());
$input.addEventListener('contextmenu', e=> e.preventDefault());

function load(i){
  const item = DATA[ order[i] ];
  $ko.textContent = item.meaning;
  $progress.textContent = `${i+1} / ${DATA.length}`;
  $bar.style.width = `${((i)/DATA.length)*100}%`;
  $input.value = '';
  $input.focus();
  tries = 0;
  revealed = false;
  $msg.textContent = '';
  $msg.className = 'msg';
  $answer.style.display = 'none';
  $answer.textContent = '';
  $tries.textContent = `시도: ${tries}/3`;
  $show.disabled = true;
}

function start(){
  order = shuffle([...Array(DATA.length).keys()]);
  idx = 0; tries = 0; revealed=false;
  load(idx);
}

function current(){ return DATA[ order[idx] ]; }

function check(){
  const ans = normalize(current().word);
  const val = normalize($input.value);
  if(!val){ $msg.textContent='입력 후 확인하세요.'; $msg.className='msg err'; return; }
  if(val === ans){
    $msg.textContent='정답입니다!';
    $msg.className='msg ok';
    setTimeout(()=> next(), 450);
  } else {
    tries++;
    $tries.textContent = `시도: ${tries}/3`;
    $msg.textContent='오답입니다. 다시 시도해 보세요.';
    $msg.className='msg err';
    if(tries >= 3){ $show.disabled = false; }
    $input.select();
  }
}

function showAnswer(){
  const ans = current().word;
  $answer.textContent = `정답: ${ans}`;
  $answer.style.display = 'block';
  revealed = true;
  $input.focus();
  $input.select();
}

function next(){
  idx++;
  if(idx >= DATA.length){
    $bar.style.width = '100%';
    alert('👏 수고했어요! 전 항목을 모두 완료했습니다.');
    start();
    return;
  }
  load(idx);
}

$check.addEventListener('click', check);
$input.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ check(); }});
$clear.addEventListener('click', ()=>{ $input.value=''; $input.focus(); });
$show.addEventListener('click', showAnswer);
$restart.addEventListener('click', start);

start();
</script>
</body>
</html>
