<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ë‹¨ì–´ë“£ê³ ì“°ê³ ëœ»ë§ì¶”ê¸° â€“ íŒíŠ¸ ì œê±°</title>
<style>
  body{font-family:system-ui,sans-serif;text-align:center;padding:20px;
       background:linear-gradient(to bottom,#f0faff,#ffffff);}
  #container{max-width:680px;margin:auto;background:#fff;padding:20px;
             border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,.1);}
  h1{margin:0 0 12px}
  .row{display:flex;gap:8px;align-items:center;justify-content:center;flex-wrap:wrap;margin-bottom:10px}
  select,input{padding:8px;font-size:1rem}
  button{padding:10px 16px;border:0;border-radius:8px;font-weight:700;cursor:pointer;}
  .btn-speak{background:#4a90e2;color:#fff;}
  .btn-check{background:#50c878;color:#fff;}
  .btn-option{background:#eee;width:100%;margin:6px 0;padding:12px;font-weight:700;}
  .btn-option.correct{background:#50c878;color:#fff;}
  .btn-option.wrong{background:#ff6b6b;color:#fff;}
  #tip{font-size:.9rem;color:#555;margin-top:6px}
</style>
</head>
<body>
<div id="container">
  <h1>ë‹¨ì–´ ë“£ê³  ì“°ê³  ëœ» ë§ì¶”ê¸°</h1>
  <div class="row">
    <label for="voiceSel">ìŒì„±:</label>
    <select id="voiceSel"></select>
    <button id="testBtn" class="btn-speak">ğŸ”Š í…ŒìŠ¤íŠ¸</button>
  </div>
  <div id="tip">â€» iPad/iPhoneì€ ë¬´ìŒ ìŠ¤ìœ„ì¹˜/ë°©í•´ê¸ˆì§€ í•´ì œ í•„ìš”</div>
  <div id="quiz" style="margin-top:14px;"></div>
</div>

<script>
const WORDS=[
  {w:"always", m:"í•­ìƒ"},
  {w:"on", m:"~ìœ„ì—, ì¼œì ¸ ìˆëŠ”"},
  {w:"travel", m:"ì—¬í–‰í•˜ë‹¤"},
  {w:"vlog", m:"ë¸Œì´ë¡œê·¸(ì˜ìƒ ê¸°ë¡)"},
  {w:"sleep", m:"ìë‹¤"},
  {w:"from", m:"~ë¡œë¶€í„°"},
  {w:"chat", m:"ëŒ€í™”í•˜ë‹¤"},
  {w:"tweet", m:"ì§¹ì§¹ê±°ë¦¬ë‹¤, íŠ¸ìœ—í•˜ë‹¤"},
  {w:"cry", m:"ìš¸ë‹¤"},
  {w:"meet", m:"ë§Œë‚˜ë‹¤"}
];
let current=0, stage="spell", score=0, total=WORDS.length*2;
const quizDiv=document.getElementById("quiz"),voiceSel=document.getElementById("voiceSel");

let voices=[], enVoice=null;
function loadVoices(){voices=speechSynthesis.getVoices();
  voiceSel.innerHTML="";
  voices.forEach((v,i)=>{
    const opt=document.createElement("option");
    opt.value=i; opt.textContent=`${v.name} (${v.lang})`; voiceSel.appendChild(opt);
  });
  enVoice=voices.find(v=>/en/i.test(v.lang))||voices[0]; 
  voiceSel.value=voices.indexOf(enVoice);
}
speechSynthesis.onvoiceschanged=loadVoices; loadVoices();

function speakWord(text){
  speechSynthesis.cancel(); speechSynthesis.resume();
  const u=new SpeechSynthesisUtterance("\u200B, \u00A0"+text);
  u.voice=voices[voiceSel.value]||enVoice; u.lang="en-US"; u.rate=0.85;
  setTimeout(()=>speechSynthesis.speak(u),60);
}

function render(){
  quizDiv.innerHTML="";
  if(current>=WORDS.length){
    const percent=Math.round(score/total*100);
    quizDiv.innerHTML=`<h2>ğŸ‰ ì™„ë£Œ!</h2><p>ì ìˆ˜: ${score}/${total} (${percent}%)</p>
    <button class="btn-check" onclick="restart()">ë‹¤ì‹œ ì‹œì‘</button>`;
    return;
  }
  const item=WORDS[current];
  if(stage==="spell"){
    const row=document.createElement("div"); row.className="row";
    const btn=document.createElement("button");
    btn.className="btn-speak"; btn.textContent="ğŸ”Š ë‹¨ì–´ ë“£ê¸°"; btn.onclick=()=>speakWord(item.w);
    row.appendChild(btn);
    const input=document.createElement("input");
    input.id="answer"; input.placeholder="ìŠ¤í ë§ ì…ë ¥"; input.autocomplete="off"; input.spellcheck=false;
    const check=document.createElement("button");
    check.className="btn-check"; check.textContent="ì •ë‹µ í™•ì¸";
    check.onclick=()=>{
      if(input.value.trim().toLowerCase()===item.w.toLowerCase()){score++;stage="meaning";render();}
      else alert("âŒ ë‹¤ì‹œ ì‹œë„í•´ ë³´ì„¸ìš”!");
    };
    quizDiv.appendChild(row); quizDiv.appendChild(input); quizDiv.appendChild(document.createElement("br")); quizDiv.appendChild(check);
  }else{
    const q=document.createElement("h3"); q.textContent="ëœ»ì„ ê³ ë¥´ì„¸ìš”:"; quizDiv.appendChild(q);
    let opts=[item.m]; while(opts.length<4){
      const m=WORDS[Math.floor(Math.random()*WORDS.length)].m;
      if(!opts.includes(m)) opts.push(m);
    }
    opts.sort(()=>Math.random()-0.5);
    opts.forEach(opt=>{
      const b=document.createElement("button"); b.className="btn-option"; b.textContent=opt;
      b.onclick=()=>{
        if(opt===item.m){score++; b.classList.add("correct"); setTimeout(()=>{current++;stage="spell";render();},500);}
        else b.classList.add("wrong");
      };
      quizDiv.appendChild(b);
    });
  }
}
function restart(){current=0; stage="spell"; score=0; render();}
render();
</script>
</body>
</html>
