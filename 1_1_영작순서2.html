<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>단어 타이핑 퀴즈 + 힌트</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 40px; }
    #quiz-container { max-width: 520px; margin: auto; padding: 24px; border: 2px solid #ccc; border-radius: 12px; background:#fff; }
    h2 { margin-bottom: 18px; }
    input { width: 85%; padding: 10px; font-size: 18px; margin-top: 8px; }
    .btns { margin-top: 12px; }
    button { padding: 10px 18px; margin: 6px; font-size: 16px; cursor: pointer; border:none; border-radius:8px; }
    .primary { background:#4caf50; color:#fff; }
    .secondary { background:#78909c; color:#fff; }
    .hint { background:#42a5f5; color:#fff; }
    #feedback { margin-top: 14px; font-size: 18px; font-weight: bold; min-height: 24px; }
    #hintBox { margin-top: 8px; font-size: 15px; color:#455a64; min-height: 20px; }
  </style>
</head>
<body>
  <div id="quiz-container">
    <h2 id="question"></h2>
    <input type="text" id="answerInput" autocomplete="off" />
    <div class="btns">
      <button class="primary" onclick="checkAnswer()">정답 확인</button>
      <button class="secondary" onclick="clearInput()">지우기</button>
      <button class="hint" onclick="showHint()">힌트</button>
    </div>
    <div id="hintBox"></div>
    <div id="feedback"></div>
  </div>

  <script>
    const quizData = [
      { question: "학교", answer: "school" },
      { question: "시작하다", answer: "begin" },
      { question: "학급, 수업", answer: "class" },
      { question: "일어나다(깨어나다)", answer: "wake up" },
      { question: "가다", answer: "go" },
      { question: "걸어가다", answer: "walk" },
      { question: "늦게, 늦은", answer: "late" },
      { question: "끝나다", answer: "end" },
      { question: "달리다", answer: "run" },
      { question: "운동장", answer: "playground" }
    ];

    let idx = 0;
    let hintLevel = 0; // 0: 없음, 1: 길이/단어수, 2: 첫글자, 3: 섞기

    const qEl = document.getElementById("question");
    const input = document.getElementById("answerInput");
    const feedback = document.getElementById("feedback");
    const hintBox = document.getElementById("hintBox");

    function loadQuestion() {
      const item = quizData[idx];
      qEl.textContent = `문제 ${idx + 1}. ${item.question}`;
      input.value = "";
      feedback.textContent = "";
      hintBox.textContent = "";
      hintLevel = 0;
      input.focus();
    }

    function checkAnswer() {
      const user = input.value.trim().toLowerCase();
      const correct = quizData[idx].answer.toLowerCase();
      if (!user) return;
      if (user === correct) {
        feedback.style.color = "green";
        feedback.textContent = "정답입니다! ✅";
        setTimeout(() => {
          idx++;
          if (idx < quizData.length) loadQuestion();
          else document.getElementById("quiz-container").innerHTML = "<h2>🎉 축하합니다! 모든 문제를 완료했습니다!</h2>";
        }, 900);
      } else {
        feedback.style.color = "red";
        feedback.textContent = "틀렸습니다. 다시 시도하세요.";
      }
    }

    function clearInput() {
      input.value = "";
      input.focus();
      feedback.textContent = "";
    }

    // ---- Hint helpers ----
    function maskLengths(answer) {
      // 단어 수/길이 표시: wake up -> [4] [2], school -> [6]
      return answer.split(" ").map(w => `[${w.length}]`).join(" ");
    }

    function revealFirstLetters(answer) {
      // 첫 글자만 공개: wake up -> w___ __, school -> s_____
      return answer.split(" ").map(w => {
        if (w.length === 0) return "";
        if (w.length === 1) return w[0];
        return w[0] + "_".repeat(w.length - 1);
      }).join(" ");
    }

    function shuffleInnerLetters(answer) {
      // 첫 글자는 고정하고 나머지를 섞기: wake -> w + shuffle(ake)
      function shuffle(str) {
        const arr = str.split("");
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr.join("");
      }
      return answer.split(" ").map(w => {
        if (w.length <= 2) return w;           // 1~2글자는 그대로
        const head = w[0];
        const mid = w.slice(1);
        return head + shuffle(mid);
      }).join(" ");
    }

    function showHint() {
      const ans = quizData[idx].answer;
      hintLevel = Math.min(hintLevel + 1, 3);
      if (hintLevel === 1) {
        hintBox.textContent = `힌트: ${maskLengths(ans)}`;
      } else if (hintLevel === 2) {
        hintBox.textContent = `힌트: ${revealFirstLetters(ans)}`;
      } else {
        hintBox.textContent = `힌트: ${shuffleInnerLetters(ans)}`;
      }
    }

    loadQuestion();
  </script>
</body>
</html>
