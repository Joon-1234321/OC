<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ë‹¨ì–´ ì¹´ë“œ â†’ ìŠ¤í ë§ â†’ ëœ» ë§ì¶”ê¸°</title>
<style>
  :root{
    --bg:#0b1220; --panel:#0f1b36cc; --text:#e5e7eb;
    --front1:#2563eb; --front2:#22c55e; --ok:#22c55e; --no:#ef4444;
  }
  html,body{
    height:100%;margin:0;
    background:radial-gradient(1200px 700px at 50% -10%, #1b2a55 0%, var(--bg) 60%);
    color:var(--text);
    font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto;
  }
  .wrap{max-width:1100px;margin:0 auto;padding:18px}
  header{display:flex;gap:10px;align-items:center;justify-content:space-between;margin-bottom:10px}
  h1{margin:0;font-size:clamp(18px,3vw,26px);font-weight:900}
  .hud{display:flex;gap:10px;flex-wrap:wrap}
  .pill{background:var(--panel);border:1px solid #28406e;padding:8px 12px;border-radius:999px}
  .btn{cursor:pointer;background:#0e1a33;border:1px solid #28406e;color:var(--text);padding:10px 14px;border-radius:12px;font-weight:800}
  .grid{display:grid;grid-template-columns:1.4fr 1fr;gap:14px}
  @media (max-width:900px){.grid{grid-template-columns:1fr}}
  .cardWrap{perspective:1400px}
  .card{
    position:relative;width:100%;height:min(56vh,520px);
    transform-style:preserve-3d;transition:transform .7s ease;
    border-radius:22px;box-shadow:0 10px 30px #0004;border:1px solid #20345f;
  }
  .card.flip{transform:rotateY(180deg)}
  .face{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column;
    backface-visibility:hidden;border-radius:22px;padding:22px;text-align:center;}
  .front{background:linear-gradient(135deg,var(--front1),var(--front2));color:white;}
  .word{font-size:clamp(32px,7vw,72px);font-weight:900;text-shadow:0 6px 30px #0006;opacity:1;animation: fadeOutWord 5s linear forwards;}
  .back{background:linear-gradient(180deg,#0d1834,#091530);transform:rotateY(180deg);}
  .mask{font-size:clamp(28px,6vw,56px);font-weight:900;color:#a7b3d8}
  .panel{background:var(--panel);border:1px solid #28406e;border-radius:16px;padding:14px}

  /* âœ… ë³´ê¸°(ëœ») ìŠ¤íƒ€ì¼ */
  .choice{
    background:#1a2750;
    border:1px solid #324c7a;
    border-radius:12px;
    padding:14px 16px;
    margin:10px 0;
    cursor:pointer;
    text-align:center;
    font-weight:800;
    color:#f9fafb;
    font-size:clamp(22px,2.5vw,32px);
    transition:all .25s ease;
    height:auto;
    min-height:60px;
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow:0 2px 8px #0003;
  }
  .choice:hover{filter:brightness(1.15);}
  .choice.ok{background:#064e3b;border-color:#22c55e;color:#dcfce7;animation:flash 0.6s ease-out;}
  .choice.no{background:#5b1717;border-color:#ef4444;color:#fee2e2;animation:shake 0.4s ease-in-out;}
  .choices{display:flex;flex-direction:column;align-items:stretch;width:100%;margin-top:14px}
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:22px;background:#0b162ecc;border:1px solid #24407a;padding:10px 14px;border-radius:12px;display:none}

  /* âœ¨ ì¹´ë“œ ë°˜ì§ íš¨ê³¼ */
  @keyframes cardFlash {
    0%,100%{box-shadow:0 0 0px #22c55e;filter:brightness(1);}
    50%{box-shadow:0 0 30px #22c55e;filter:brightness(1.3);}
  }
  .sparkle { animation: cardFlash 1.2s ease-in-out infinite; }

  /* ğŸ’« ì•ˆë‚´ ë¬¸êµ¬ ì„œì„œíˆ ì‚¬ë¼ì§ */
  @keyframes fadeOutHint {
    0% {opacity:1;}
    100% {opacity:0;}
  }
  #frontHint {
    opacity:1;
    animation: fadeOutHint 5s linear forwards;
  }

  /* ğŸ’« ë‹¨ì–´ ì„œì„œíˆ ì‚¬ë¼ì§ */
  @keyframes fadeOutWord {
    0% {opacity:1;}
    100% {opacity:0;}
  }

  /* ğŸ’¥ ë²„íŠ¼ í”ë“¤ë¦¼ */
  @keyframes shake {0%,100%{transform:translateX(0);}20%{transform:translateX(-8px);}40%{transform:translateX(8px);}60%{transform:translateX(-6px);}80%{transform:translateX(6px);} }
  @keyframes flash {0%{box-shadow:0 0 0px #22c55e;}50%{box-shadow:0 0 20px #22c55e;}100%{box-shadow:0 0 0px #22c55e;}}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>ë‹¨ì–´ ì¹´ë“œ â†’ ìŠ¤í ë§ â†’ ëœ» ë§ì¶”ê¸°</h1>
    <div class="hud">
      <div class="pill">ë‹¨ì–´ <b id="idx">1</b>/<span id="total">14</span></div>
      <div class="pill">ì •ë‹µ <b id="corrects">0</b></div>
      <button class="btn" id="btnReset">â†º ë‹¤ì‹œí•˜ê¸°</button>
    </div>
  </header>

  <div class="grid">
    <section class="cardWrap">
      <div id="card" class="card">
        <div class="face front">
          <div class="word" id="frontWord">train</div>
          <div id="frontHint">5ì´ˆ í›„ ì¹´ë“œê°€ ë’¤ì§‘í˜€ìš”</div>
        </div>
        <div class="face back">
          <div class="mask" id="mask">â– â– â– â– </div>
          <div class="panel" style="margin-top:12px;max-width:560px;width:90%">
            <div id="typingStage">
              <form id="spellForm" autocomplete="off" style="display:flex;gap:8px;justify-content:center;flex-wrap:wrap">
                <input id="spellInput" type="text" placeholder="ì˜ì–´ ìŠ¤í ë§" style="flex:1 1 240px;min-width:200px;padding:12px;border-radius:10px;border:1px solid #2b4677;background:#0b1a33;color:white;font-size:18px;font-weight:800">
                <button class="btn" type="submit">í™•ì¸</button>
              </form>
            </div>
            <div id="mcqStage" style="display:none">
              <div>ëœ»ì„ ê³ ë¥´ì„¸ìš”</div>
              <div id="choices" class="choices"></div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>

<div id="toast" class="toast"></div>

<script>
const WORDS=[
  {en:"train",ko:["ê¸°ì°¨","í›ˆë ¨í•˜ë‹¤"]},
  {en:"smile",ko:["ë¯¸ì†Œì§“ë‹¤"]},
  {en:"happily",ko:["í–‰ë³µí•˜ê²Œ"]},
  {en:"give up",ko:["í¬ê¸°í•˜ë‹¤"]},
  {en:"give in",ko:["êµ´ë³µí•˜ë‹¤","ì–‘ë³´í•˜ë‹¤"]},
  {en:"never",ko:["ì ˆëŒ€ ~ì•Šë‹¤"]},
  {en:"move",ko:["ì›€ì§ì´ë‹¤","ê°ë™ì‹œí‚¤ë‹¤"]},
  {en:"win",ko:["ì´ê¸°ë‹¤"]},
  {en:"return",ko:["ëŒì•„ì˜¤ë‹¤","ë˜ëŒë ¤ì£¼ë‹¤"]},
  {en:"abroad",ko:["í•´ì™¸ì—","í•´ì™¸ë¡œ"]},
  {en:"appear",ko:["ë‚˜íƒ€ë‚˜ë‹¤","ì¶œí˜„í•˜ë‹¤","ë³´ì´ë‹¤"]},
  {en:"Germany",ko:["ë…ì¼"]},
  {en:"always",ko:["í•­ìƒ"]},
  {en:"went",ko:["ê°”ë‹¤ (goì˜ ê³¼ê±°)"]}
];
let idx=0,corrects=0,errors=0;let flipTO=null;
const $=s=>document.querySelector(s);
const card=$("#card"),frontWord=$("#frontWord"),frontHint=$("#frontHint"),mask=$("#mask"),idxE=$("#idx"),totalE=$("#total"),corE=$("#corrects"),spellForm=$("#spellForm"),input=$("#spellInput"),typing=$("#typingStage"),mcq=$("#mcqStage"),choices=$("#choices"),toast=$("#toast"),btnReset=$("#btnReset");

function norm(s){return s.toLowerCase().replace(/[^a-z]/g,"");}
function toastMsg(m,ms=900){toast.textContent=m;toast.style.display="block";setTimeout(()=>toast.style.display="none",ms);}
function speak(t){try{const u=new SpeechSynthesisUtterance("\u200B,\u200B "+t);u.lang="en-US";u.rate=.9;speechSynthesis.cancel();speechSynthesis.speak(u);}catch(e){}}
function hud(){idxE.textContent=idx+1;totalE.textContent=WORDS.length;corE.textContent=corrects;}

function front(){
  card.classList.remove("flip","sparkle");
  errors=0;
  frontWord.textContent=WORDS[idx].en;
  frontHint.textContent="5ì´ˆ í›„ ì¹´ë“œê°€ ë’¤ì§‘í˜€ìš”";
  frontHint.style.animation="none";
  void frontHint.offsetWidth;
  frontHint.style.animation="fadeOutHint 5s linear forwards";
  frontWord.style.animation="none";
  void frontWord.offsetWidth;
  frontWord.style.animation="fadeOutWord 5s linear forwards";
  mask.textContent="â– â– â– â– ";
  typing.style.display="block";
  mcq.style.display="none";
  input.value="";
  input.disabled=true;
  
  // âœ¨ ì¹´ë“œê°€ 5ì´ˆ ë™ì•ˆ ê¹œë¹¡ê¹œë¹¡ (sparkle)
  card.classList.add("sparkle");
  clearTimeout(flipTO);
  flipTO=setTimeout(()=>{
    card.classList.remove("sparkle");
    flip();
  },5000);
}
function flip(){
  card.classList.remove("sparkle");
  card.classList.add("flip");
  mask.textContent="â—".repeat(norm(WORDS[idx].en).length);
  setTimeout(()=>{input.disabled=false;input.focus();},350);
}
spellForm.addEventListener("submit",e=>{
  e.preventDefault();
  const user=norm(input.value),ans=norm(WORDS[idx].en);
  if(user===ans){errors=0;speak(WORDS[idx].en);typing.style.display="none";buildMCQ();}
  else{errors++;toastMsg(`ì˜¤ë‹µ ${errors}íšŒ`);if(errors>=2){errors=0;revealAgain();}else input.select();}
});
function revealAgain(){
  card.classList.remove("flip");
  frontWord.textContent=WORDS[idx].en;
  toastMsg("ë‹¤ì‹œ í•œ ë²ˆ ë´…ì‹œë‹¤ ğŸ‘€",1500);
  speak(WORDS[idx].en);
  setTimeout(()=>{card.classList.add("flip");input.disabled=false;input.focus();},2000);
}
function buildMCQ(){
  mcq.style.display="block";
  choices.innerHTML="";
  const correct=(Array.isArray(WORDS[idx].ko)?WORDS[idx].ko.join(', '):WORDS[idx].ko);
  const pool=WORDS.filter((w,i)=>i!==idx).map(w=>Array.isArray(w.ko)?w.ko.join(', '):w.ko);
  const opts=[correct,...pool.sort(()=>Math.random()-0.5).slice(0,3)].sort(()=>Math.random()-0.5);
  opts.forEach(t=>{
    const b=document.createElement("button");
    b.className="choice";
    b.textContent=t;
    b.onclick=()=>{
      if(t===correct){b.classList.add("ok");card.classList.add("flash");toastMsg("ì •ë‹µ! ë‹¤ìŒ ë‹¨ì–´ë¡œ");corrects++;setTimeout(()=>{card.classList.remove("flash");next();},800);}else{b.classList.add("no");toastMsg("ë‹¤ì‹œ ì„ íƒ!");}}
    choices.append(b);
  });
}
function next(){idx++;if(idx>=WORDS.length){alert(`ğŸ‰ ì™„ë£Œ!\\nì •ë‹µ ${corrects}/${WORDS.length}`);reset();return;}hud();front();}
function reset(){speechSynthesis.cancel();idx=0;corrects=0;hud();front();}
btnReset.addEventListener('click',reset);
window.onload=()=>{setTimeout(()=>speechSynthesis.getVoices(),200);hud();front();};
</script>
</body>
</html>
